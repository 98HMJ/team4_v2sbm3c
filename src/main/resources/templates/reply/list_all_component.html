<div th:fragment="list_all_fragment" > <!-- <div th:replace=... -->
    <head>
        <script>
            let page = 0;
            const perpage = 5;
      
            function loadADD() {
                const comments = document.querySelectorAll('.community_comment_board');
                const totalComments = comments.length;
                let start = page * perpage;
                let end = start + perpage;
                for (let i = start; i < end && i < totalComments; i++) {
                    comments[i].style.display = 'block';
                }
                page++;
                if (end >= totalComments) {
                    document.getElementById('load').style.display = 'none';
                }
            }
      
            document.addEventListener('DOMContentLoaded', () => {
                loadADD(); // Load initial comments
            });
            
            function showTime(createdAt) {
              let createDate = new Date(createdAt);
              const milliSeconds = new Date() - createDate;
              const seconds = milliSeconds / 1000;
              if (seconds < 60) return `방금 전`;
              const minutes = seconds / 60;
              if (minutes < 60) return `${Math.floor(minutes)}분 전`;
              const hours = minutes / 60;
              if (hours < 24) return `${Math.floor(hours)}시간 전`;
              const days = hours / 24;
              if (days < 7) return `${Math.floor(days)}일 전`;
              const weeks = days / 7;
              if (weeks < 5) return `${Math.floor(weeks)}주 전`;
              const months = days / 30;
              if (months < 12) return `${Math.floor(months)}개월 전`;
              const years = days / 365;
              return `${Math.floor(years)}년 전`;
            }
            
            document.addEventListener('DOMContentLoaded', () => {
              const uptimeElements = document.querySelectorAll('.uptime');
              uptimeElements.forEach(el => {
                  el.textContent =  showTime(el.textContent);
              });
            });
        </script>
    </head>
    <!-- 댓글 조회 영역 -->
    <div id="replyList">
        <div th:each="replyMemberVO, status:${list}" class="community_comment_board" style="display: none;">
            <div class="community_comment_contents"
                style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
                <!-- 댓글 작성자 --> <!-- 댓글 작성일자 -->
                <div style="display: flex; padding: 10px; align-items: center;">
                    <!-- anotherList의 요소 접근 -->
                    <div><span style="font-weight: 600;" th:text="${replyMemberVO.nickname}"></span></div>
                    <div style="margin-right: 10px; "></div>
                    <span class="uptime" style="color: rgb(192, 192, 192); font-size: 12px;"
                        th:text="${replyMemberVO.rdate}"></span>
                </div>
                <div th:if="${replyMemberVO.memberno == memberno}" style="display: flex; align-items: center;">
                    <!-- 수정 아이콘 : 멤버가 일치할 때 표시 -->
                    <a class="icon-link"
                        th:href="@{|/reply/update?communityno=${communityVO.communityno}&replyno=${replyMemberVO.replyno}|}"
                        title="수정">
                        <img src="/images/update.png" alt="Edit">
                    </a>
                    <!-- 삭제 아이콘 : 멤버가 일치할 때 표시 -->
                    <a class="icon-link"
                        th:href="@{|/reply/delete?communityno=${communityVO.communityno}&replyno=${replyMemberVO.replyno}|}"
                        title="삭제">
                        <img src="/images/delete.png" alt="Delete">
                    </a>
                </div>
            </div>

            <!-- 댓글 내용 -->
            <div style="padding: 10px;" th:text="${replyMemberVO.contents}">댓글 내용</div>

            <!-- 댓글 업로드 사진 -->
            <div th:if="${replyMemberVO.photo.endsWith('jpg') or replyMemberVO.photo.endsWith('png')  or replyMemberVO.photo.endsWith('gif')}">
                <img th:src="@{|/replys/storage/${replyMemberVO.thumb1}|}" style="width: 120px; height: 90px;">
            </div>

            <div th:if="${((replyMemberVO.photo.endsWith('jpg') or replyMemberVO.photo.endsWith('png')  or replyMemberVO.photo.endsWith('gif')) == false) and (replyMemberVO.filesize> 0)}">
                <span th:text="${replyMemberVO.photo}"></span>
            </div>

            <div th:if="${replyMemberVO.filesize == 0}">
                <img src="/images/none.png" style="width: 120px; height: 90px;">
            </div>

            <!-- 댓글 신고, 댓글 좋아요 -->
            <div class="community_like_board">
                <div>
                    <button type="button" class="btn btn-outline-danger btn-sm"
                        th:attr="onclick=|location.href='/report_reply/create?communityno=${communityVO.communityno}&replyno=${replyMemberVO.replyno}'|">신고</button>
                </div>
                <a th:href="@{|/reply/update_increase_cnt_like?communityno=${communityVO.communityno}&replyno=${replyMemberVO.replyno}|}">
                    <img src="/images/like_unable.png" alt="Like">
                    <span th:text="${replyMemberVO.likecnt}">좋아요</span>
                </a>
            </div>
        </div>
    </div>


    <div class="btn_more" style="text-align: center; margin: 20px 0 20px;" >
        <span id="load" class="btn btn-primary" style="cursor: pointer;" onclick="loadADD()">더보기</span>
    </div>
</div>